<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户登录</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/page-auth.css">
</head>
<body>
    <!-- 背景装饰 -->
    <div class="bg-decoration">
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
    </div>

    <!-- 登录容器 -->
    <div class="login-container">
        <h2 class="login-title">用户登录</h2>
        <form id="loginForm">
            <!-- 邮箱输入 -->
            <div class="form-group">
                <label class="form-label" for="email">电子邮箱</label>
                <div class="input-wrapper">
                    <i class="fas fa-envelope input-icon"></i>
                    <input type="email" id="email" class="form-input" placeholder="请输入邮箱地址" required>
                </div>
                <div class="error-message" id="emailError">请输入有效的电子邮箱地址</div>
            </div>

            <!-- 密码输入 -->
            <div class="form-group">
                <label class="form-label" for="password">密码</label>
                <div class="input-wrapper">
                    <i class="fas fa-lock input-icon"></i>
                    <input type="password" id="password" class="form-input" placeholder="请输入密码" required>
                    <button type="button" class="toggle-password" id="togglePassword">
                        <i class="fas fa-eye-slash"></i>
                    </button>
                </div>
                <div class="error-message" id="passwordError">密码不能为空</div>
            </div>

            <!-- 记住密码与忘记密码 -->
            <div class="remember-forgot">
                <label class="remember-me">
                    <input type="checkbox" class="remember-checkbox" id="rememberMe">
                    <span class="remember-text">记住我</span>
                </label>
                <a href="#" class="forgot-password">忘记密码？</a>
            </div>

            <!-- 登录按钮 -->
            <button type="submit" class="login-btn" id="loginBtn">
                登录
            </button>

            <!-- 注册链接 -->
            <div class="register-link">
                还没有账户？<a href="#" class="register-btn">立即注册</a>
            </div>
        </form>
    </div>

    <script>
        // 密码显示/隐藏切换
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');

        togglePassword.addEventListener('click', () => {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            
            // 切换图标
            const icon = togglePassword.querySelector('i');
            if (type === 'text') {
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            } else {
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            }
        });

        // 表单提交处理
        const loginForm = document.getElementById('loginForm');
        const loginBtn = document.getElementById('loginBtn');
        const emailInput = document.getElementById('email');
        const emailError = document.getElementById('emailError');
        const passwordError = document.getElementById('passwordError');

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            let isValid = true;

            // 邮箱验证
            const email = emailInput.value.trim();
            if (!validateEmail(email)) {
                emailError.style.display = 'block';
                isValid = false;
            } else {
                emailError.style.display = 'none';
            }

            // 密码验证
            const password = passwordInput.value.trim();
            if (password === '') {
                passwordError.style.display = 'block';
                isValid = false;
            } else {
                passwordError.style.display = 'none';
            }

            // 如果验证通过，模拟登录过程
            if (isValid) {
                // 显示加载状态
                loginBtn.disabled = true;
                loginBtn.innerHTML = '<span class="loading-spinner"></span> 登录中...';

                // 模拟登录请求（实际项目中替换为真实接口请求）
                setTimeout(() => {
                    // 检查"记住我"选项
                    const rememberMe = document.getElementById('rememberMe').checked;
                    if (rememberMe) {
                        // 记住密码（实际项目中应使用安全的方式存储，如HttpOnly Cookie）
                        localStorage.setItem('savedEmail', email);
                    } else {
                        localStorage.removeItem('savedEmail');
                    }

                    // 登录成功提示
                    alert('登录成功！即将跳转到首页');
                    
                    // 重置按钮状态
                    loginBtn.disabled = false;
                    loginBtn.innerHTML = '登录';
                    
                    // 实际项目中此处跳转到首页
                    // window.location.href = '/home';
                }, 1500);
            }
        });

        // 邮箱验证函数
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // 页面加载时检查是否有保存的邮箱
        window.addEventListener('load', () => {
            const savedEmail = localStorage.getItem('savedEmail');
            if (savedEmail) {
                emailInput.value = savedEmail;
                document.getElementById('rememberMe').checked = true;
            }
        });

        // 输入框聚焦时隐藏错误提示
        [emailInput, passwordInput].forEach(input => {
            input.addEventListener('focus', () => {
                if (input === emailInput) {
                    emailError.style.display = 'none';
                } else {
                    passwordError.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>